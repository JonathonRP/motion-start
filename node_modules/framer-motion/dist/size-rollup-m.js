import*as t from"react";import{createContext as r,useContext as n,useRef as e,useLayoutEffect as a,useEffect as o,useCallback as i,useMemo as s,forwardRef as u,createElement as l}from"react";import{__assign as f,__rest as c}from"tslib";import{invariant as v}from"hey-listen";import{number as d,px as m,degrees as p,scale as g,alpha as y,progressPercentage as h}from"style-value-types";var w=function(t){return{isEnabled:function(r){return t.some((function(t){return!!r[t]}))}}},b={measureLayout:w(["layout","layoutId","drag"]),animation:w(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:w(["exit"]),drag:w(["drag","dragControls"]),focus:w(["whileFocus"]),hover:w(["whileHover","onHoverStart","onHoverEnd"]),tap:w(["whileTap","onTap","onTapStart","onTapCancel"]),pan:w(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:w(["layout","layoutId"])};var S=r({strict:!1}),x=Object.keys(b),P=x.length;var E=r({transformPagePoint:function(t){return t},isStatic:!1}),T=r({});var k=r(null);var O=r(null),A="undefined"!=typeof window,C=A?a:o;function L(t,r,a,i){var s=n(E),u=n(S),l=n(T).visualElement,c=n(k),v=function(t){var r=t.layoutId,e=n(O);return e&&void 0!==r?e+"-"+r:r}(a),d=e(void 0);i||(i=u.renderer),!d.current&&i&&(d.current=i(t,{visualState:r,parent:l,props:f(f({},a),{layoutId:v}),presenceId:null==c?void 0:c.id,blockInitialAnimation:!1===(null==c?void 0:c.initial)}));var m=d.current;return C((function(){var t;m&&(m.setProps(f(f(f({},s),a),{layoutId:v})),m.isPresent=null===(t=c)||t.isPresent,m.isPresenceRoot=!l||l.presenceId!==(null==c?void 0:c.id),m.syncRender())})),o((function(){var t;m&&(null===(t=m.animationState)||void 0===t||t.animateChanges())})),C((function(){return function(){return null==m?void 0:m.notifyUnmount()}}),[]),m}function V(t,r,n){return i((function(e){var a,o;e&&(null===(a=t.mount)||void 0===a||a.call(t,e)),r&&(e?r.mount(e):r.unmount()),n&&("function"==typeof n?n(e):"object"==typeof(o=n)&&Object.prototype.hasOwnProperty.call(o,"current")&&(n.current=e))}),[r])}function R(t){return"string"==typeof t||function(t){return Array.isArray(t)}(t)}function B(t){var r;return"function"==typeof(null===(r=t.animate)||void 0===r?void 0:r.start)||R(t.initial)||R(t.animate)||R(t.whileHover)||R(t.whileDrag)||R(t.whileTap)||R(t.whileFocus)||R(t.exit)}function Y(t,r){var e=function(t,r){if(B(t)){var n=t.initial,e=t.animate;return{initial:!1===n||R(n)?n:void 0,animate:R(e)?e:void 0}}return!1!==t.inherit?r:{}}(t,n(T)),a=e.initial,o=e.animate;return s((function(){return{initial:a,animate:o}}),r?[H(a),H(o)]:[])}function H(t){return Array.isArray(t)?t.join(" "):t}function X(r){var e=r.preloadedFeatures,a=r.createVisualElement,o=r.useRender,i=r.useVisualState,s=r.Component;return e&&function(t){for(var r in t){var n=t[r];null!==n&&(b[r].Component=n)}}(e),u((function(r,u){var l=n(E).isStatic,c=null,d=Y(r,l),m=i(r,l);return!l&&A&&(d.visualElement=L(s,m,r,a),c=function(r,e,a){var o=[],i=n(S);if(!e)return null;"production"!==process.env.NODE_ENV&&a&&i.strict&&v(!1,"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.");for(var s=0;s<P;s++){var u=x[s],l=b[u],c=l.isEnabled,d=l.Component;c(r)&&d&&o.push(t.createElement(d,f({key:u},r,{visualElement:e})))}return o}(r,d.visualElement,e)),t.createElement(t.Fragment,null,t.createElement(T.Provider,{value:d},o(s,r,V(m,d.visualElement,u),m,l)),c)}))}var D=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function M(t){return"string"==typeof t&&!t.includes("-")&&!!(D.indexOf(t)>-1||/[A-Z]/.test(t))}var F={},I=["","X","Y","Z"],W=["transformPerspective","x","y","z"];function Z(t,r){return W.indexOf(t)-W.indexOf(r)}["translate","scale","rotate","skew"].forEach((function(t){return I.forEach((function(r){return W.push(t+r)}))}));var j=new Set(W);function z(t){return j.has(t)}var U=new Set(["originX","originY","originZ"]);function K(t){return U.has(t)}function N(t,r){var n=r.layout,e=r.layoutId;return z(t)||K(t)||(n||void 0!==e)&&(!!F[t]||"opacity"===t)}var _=function(t){return null!==t&&"object"==typeof t&&t.getVelocity},q={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function $(t){return t.startsWith("--")}var G=function(t,r){return r&&"number"==typeof t?r.transform(t):t},J=f(f({},d),{transform:Math.round}),Q={borderWidth:m,borderTopWidth:m,borderRightWidth:m,borderBottomWidth:m,borderLeftWidth:m,borderRadius:m,radius:m,borderTopLeftRadius:m,borderTopRightRadius:m,borderBottomRightRadius:m,borderBottomLeftRadius:m,width:m,maxWidth:m,height:m,maxHeight:m,size:m,top:m,right:m,bottom:m,left:m,padding:m,paddingTop:m,paddingRight:m,paddingBottom:m,paddingLeft:m,margin:m,marginTop:m,marginRight:m,marginBottom:m,marginLeft:m,rotate:p,rotateX:p,rotateY:p,rotateZ:p,scale:g,scaleX:g,scaleY:g,scaleZ:g,skew:p,skewX:p,skewY:p,distance:m,translateX:m,translateY:m,translateZ:m,x:m,y:m,z:m,perspective:m,transformPerspective:m,opacity:y,originX:h,originY:h,originZ:m,zIndex:J,fillOpacity:y,strokeOpacity:y,numOctaves:J};function tt(t,r,n,e,a,o,i,s){var u,l=t.style,f=t.vars,c=t.transform,v=t.transformKeys,d=t.transformOrigin;v.length=0;var m=!1,p=!1,g=!0;for(var y in r){var h=r[y];if($(y))f[y]=h;else{var w=Q[y],b=G(h,w);if(z(y)){if(m=!0,c[y]=b,v.push(y),!g)continue;h!==(null!==(u=w.default)&&void 0!==u?u:0)&&(g=!1)}else if(K(y))d[y]=b,p=!0;else if(e&&n&&e.isHydrated&&F[y]){var S=F[y].process(h,e,n),x=F[y].applyTo;if(x)for(var P=x.length,E=0;E<P;E++)l[x[E]]=S;else l[y]=S}else l[y]=b}}e&&n&&i&&s?(l.transform=i(e.deltaFinal,e.treeScale,m?c:void 0),o&&(l.transform=o(c,l.transform)),l.transformOrigin=s(e)):(m&&(l.transform=function(t,r,n,e){var a=t.transform,o=t.transformKeys,i=r.enableHardwareAcceleration,s=void 0===i||i,u=r.allowTransformNone,l=void 0===u||u,f="";o.sort(Z);for(var c=!1,v=o.length,d=0;d<v;d++){var m=o[d];f+=(q[m]||m)+"("+a[m]+") ","z"===m&&(c=!0)}return!c&&s?f+="translateZ(0)":f=f.trim(),e?f=e(a,n?"":f):l&&n&&(f="none"),f}(t,a,g,o)),p&&(l.transformOrigin=function(t){var r=t.originX,n=void 0===r?"50%":r,e=t.originY,a=void 0===e?"50%":e,o=t.originZ;return n+" "+a+" "+(void 0===o?0:o)}(d)))}var rt=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function nt(t,r,n){for(var e in r)_(r[e])||N(e,n)||(t[e]=r[e])}function et(t,r,n){var e={};return nt(e,t.style||{},t),Object.assign(e,function(t,r,n){var e=t.transformTemplate;return s((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};tt(t,r,void 0,void 0,{enableHardwareAcceleration:!n},e);var a=t.style;return f(f({},t.vars),a)}),[r])}(t,r,n)),t.transformValues&&(e=t.transformValues(e)),e}function at(t,r,n){var e={},a=et(t,r,n);return Boolean(t.drag)&&(e.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),e.style=a,e}var ot=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function it(t){return ot.has(t)}var st=function(t){return!it(t)};try{var ut=require("@emotion/is-prop-valid").default;st=function(t){return t.startsWith("on")?!it(t):ut(t)}}catch(t){}function lt(t,r,n){return"string"==typeof t?t:m.transform(r+n*t)}var ft=function(t,r){return m.transform(t*r)},ct={offset:"stroke-dashoffset",array:"stroke-dasharray"},vt={offset:"strokeDashoffset",array:"strokeDasharray"};function dt(t,r,n,e,a,o,i,s){var u=r.attrX,l=r.attrY,f=r.originX,v=r.originY,d=r.pathLength,m=r.pathSpacing,p=void 0===m?1:m,g=r.pathOffset,y=void 0===g?0:g;tt(t,c(r,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,e,a,o,i,s),t.attrs=t.style,t.style={};var h=t.attrs,w=t.style,b=t.dimensions,S=t.totalPathLength;h.transform&&(b&&(w.transform=h.transform),delete h.transform),b&&(void 0!==f||void 0!==v||w.transform)&&(w.transformOrigin=function(t,r,n){return lt(r,t.x,t.width)+" "+lt(n,t.y,t.height)}(b,void 0!==f?f:.5,void 0!==v?v:.5)),void 0!==u&&(h.x=u),void 0!==l&&(h.y=l),void 0!==S&&void 0!==d&&function(t,r,n,e,a,o){void 0===e&&(e=1),void 0===a&&(a=0),void 0===o&&(o=!0);var i=o?ct:vt;t[i.offset]=ft(-a,r);var s=ft(n,r),u=ft(e,r);t[i.array]=s+" "+u}(h,S,d,p,y,!1)}var mt=function(){return f(f({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function pt(t,r){var n=s((function(){var n=mt();return dt(n,r,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),f(f({},n.attrs),{style:f({},n.style)})}),[r]);if(t.style){var e={};nt(e,t.style,t),n.style=f(f({},e),n.style)}return n}function gt(t){void 0===t&&(t=!1);return function(r,n,e,a,o){var i=a.latestValues,s=(M(r)?pt:at)(n,i,o),u=function(t,r,n){var e={};for(var a in t)(st(a)||!0===n&&it(a)||!r&&!it(a))&&(e[a]=t[a]);return e}(n,"string"==typeof r,t),c=f(f(f({},u),s),{ref:e});return l(r,c)}}var yt=/([a-z])([A-Z])/g;var ht=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox"]);function wt(t,r){for(var n in function(t,r){var n=r.style,e=r.vars;for(var a in Object.assign(t.style,n),e)t.style.setProperty(a,e[a])}(t,r),r.attrs)t.setAttribute(ht.has(n)?n:n.replace(yt,"$1-$2").toLowerCase(),r.attrs[n])}function bt(t){var r=t.style,n={};for(var e in r)(_(r[e])||N(e,t))&&(n[e]=r[e]);return n}function St(t){var r,n=_(t)?t.get():t;return r=n,Boolean(r&&"object"==typeof r&&r.mix&&r.toValue)?n.toValue():n}function xt(t,r,n,e){var a=t.scrapeMotionValuesFromProps,o=t.createRenderState,i=t.onMount,s={latestValues:Et(r,n,e,a),renderState:o()};return i&&(s.mount=function(t){return i(r,t,s)}),s}var Pt=function(t){return function(r,a){var o,i,s=n(T),u=n(k);return a?xt(t,r,s,u):(o=function(){return xt(t,r,s,u)},null===(i=e(null)).current&&(i.current=o()),i.current)}};function Et(t,r,n,e){var a={},o=!1===(null==n?void 0:n.initial),i=e(t);for(var s in i)a[s]=St(i[s]);var u=t.initial,l=t.animate,f=B(t),v=function(t){return Boolean(B(t)||t.variants)}(t);r&&v&&!f&&!1!==t.inherit&&(null!=u||(u=r.initial),null!=l||(l=r.animate));var d,m=o||!1===u?l:u;!m||"boolean"==typeof m||"object"==typeof(d=m)&&"function"==typeof d.start||(Array.isArray(m)?m:[m]).forEach((function(r){var n=function(t,r,n,e,a){var o;return void 0===e&&(e={}),void 0===a&&(a={}),"string"==typeof r&&(r=null===(o=t.variants)||void 0===o?void 0:o[r]),"function"==typeof r?r(null!=n?n:t.custom,e,a):r}(t,r);if(n){var e=n.transitionEnd;n.transition;var o=c(n,["transitionEnd","transition"]);for(var i in o)a[i]=o[i];for(var i in e)a[i]=e[i]}}));return a}var Tt={useVisualState:Pt({scrapeMotionValuesFromProps:function(t){var r=bt(t);for(var n in t){if(_(t[n]))r["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return r},createRenderState:mt,onMount:function(t,r,n){var e=n.renderState,a=n.latestValues;try{e.dimensions="function"==typeof r.getBBox?r.getBBox():r.getBoundingClientRect()}catch(t){e.dimensions={x:0,y:0,width:0,height:0}}"path"===r.tagName&&(e.totalPathLength=r.getTotalLength()),dt(e,a,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),wt(r,e)}})};var kt={useVisualState:Pt({scrapeMotionValuesFromProps:bt,createRenderState:rt})};var Ot=function(t){function r(r,n){return void 0===n&&(n={}),X(t(r,n))}var n=new Map;return new Proxy(r,{get:function(t,e){return n.has(e)||n.set(e,r(e)),n.get(e)}})}((function(t,r,n,e){var a=r.forwardMotionProps,o=void 0!==a&&a,i=M(t)?Tt:kt;return f(f({},i),{preloadedFeatures:n,useRender:gt(o),createVisualElement:e,Component:t})}));export{Ot as m};
